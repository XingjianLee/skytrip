# 🔧 如何正确运行启动脚本

## 问题说明

在 Windows 系统中，直接双击 `.ps1` 文件会打开记事本，而不是执行脚本。这是因为 Windows 默认将 `.ps1` 文件关联到文本编辑器。

## ✅ 解决方案

### 方案一：使用批处理文件（推荐，最简单）

我已经为你创建了 `.bat` 批处理文件，可以直接双击运行：

- **一键启动所有服务**：双击 `start_all.bat`
- **仅启动后端**：双击 `start_backend.bat`
- **仅启动前端**：双击 `start_frontend.bat`

这些批处理文件会自动调用 PowerShell 并执行相应的脚本。

### 方案二：在 PowerShell 中执行（推荐）

1. **打开 PowerShell**：
   - 按 `Win + X`，选择 "Windows PowerShell" 或 "终端"
   - 或者在文件资源管理器中，按住 `Shift` 键，右键点击项目文件夹，选择 "在此处打开 PowerShell 窗口"

2. **执行脚本**：
   ```powershell
   # 方式一：使用相对路径
   .\start_all.ps1
   
   # 方式二：使用完整路径
   & "D:\competition\skytrip\start_all.ps1"
   ```

### 方案三：修改 PowerShell 执行策略（一次性设置）

如果你希望以后可以直接运行 PowerShell 脚本，可以修改执行策略：

1. **以管理员身份打开 PowerShell**：
   - 右键点击 "Windows PowerShell"
   - 选择 "以管理员身份运行"

2. **设置执行策略**：
   ```powershell
   # 为当前用户设置（推荐）
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
   
   # 或者为所有用户设置（需要管理员权限）
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope LocalMachine
   ```

3. **验证设置**：
   ```powershell
   Get-ExecutionPolicy -List
   ```

设置完成后，你就可以直接运行 PowerShell 脚本了。

### 方案四：使用命令行参数执行（临时绕过）

每次执行时临时绕过执行策略：

```powershell
powershell.exe -ExecutionPolicy Bypass -File .\start_all.ps1
```

## 📋 执行方式对比

| 方式 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| 双击 `.bat` 文件 | 最简单，直接双击即可 | 需要额外的批处理文件 | ⭐⭐⭐⭐⭐ |
| PowerShell 中执行 | 原生支持，功能完整 | 需要打开 PowerShell | ⭐⭐⭐⭐ |
| 修改执行策略 | 一次设置，永久有效 | 需要管理员权限 | ⭐⭐⭐ |
| 临时绕过 | 不需要修改系统设置 | 每次都要输入长命令 | ⭐⭐ |

## 🚀 快速开始

### 最简单的方式（推荐）

1. 双击 `start_all.bat`
2. 在弹出窗口中选择 `3`（同时启动后端和前端）
3. 等待服务启动完成

### 手动启动

**终端 1 - 启动后端**：
- 双击 `start_backend.bat`
- 或打开 PowerShell，执行：`.\start_backend.ps1`

**终端 2 - 启动前端**：
- 双击 `start_frontend.bat`
- 或打开 PowerShell，执行：`.\start_frontend.ps1`

## ⚠️ 常见错误

### 错误 1：无法加载文件，因为在此系统上禁止运行脚本

**原因**：PowerShell 执行策略限制

**解决方案**：
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 错误 2：找不到文件

**原因**：当前目录不正确

**解决方案**：
```powershell
# 先切换到项目目录
cd D:\competition\skytrip
# 再执行脚本
.\start_all.ps1
```

### 错误 3：脚本被记事本打开

**原因**：直接双击了 `.ps1` 文件

**解决方案**：
- 使用 `.bat` 文件（推荐）
- 或在 PowerShell 中执行脚本

## 📝 总结

**推荐使用方式**：
1. **最简单**：双击 `start_all.bat` 文件
2. **最灵活**：在 PowerShell 中执行 `.\start_all.ps1`

两种方式效果相同，选择你习惯的方式即可！

